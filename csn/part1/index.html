<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://notes.shichao.io/csn/part1/">
        <link rel="shortcut icon" href="../../toki_32.png">
        

	<title>Part 1: Language - Shichao's Notes</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,400italic,500,600" rel="stylesheet">
        <link href="../../custom.css" rel="stylesheet">
        <link href="../../friendly.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Shichao's Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">APUE <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../apue/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch1/">Chapter 1. UNIX System Overview</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch2/">Chapter 2. UNIX Standardization and Implementations</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch3/">Chapter 3. File I/O</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch4/">Chapter 4. Files and Directories</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch5/">Chapter 5. Standard I/O Library</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch6/">Chapter 6. System Data Files and Information</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch7/">Chapter 7. Process Environment</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch8/">Chapter 8. Process Control</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch9/">Chapter 9. Process Relationships</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch10/">Chapter 10. Signals</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch11/">Chapter 11. Threads</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch12/">Chapter 12. Thread Control</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch13/">Chapter 13. Daemon Processes</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch14/">Chapter 14. Advanced I/O</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch15/">Chapter 15. Interprocess Communication</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch16/">Chapter 16. Network IPC: Sockets</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../apue/ch17/">Chapter 17. Advanced IPC</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">LKD <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../lkd/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch1/">Chapter 1. Introduction to the Linux Kernel</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch2/">Chapter 2. Getting Started with the Kernel</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch3/">Chapter 3. Process Management</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch4/">Chapter 4. Process Scheduling</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch5/">Chapter 5. System Calls</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch6/">Chapter 6. Kernel Data Structures</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch7/">Chapter 7. Interrupts and Interrupt Handlers</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch8/">Chapter 8. Bottom Halves and Deferring Work</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch9/">Chapter 9. An Introduction to Kernel Synchronization</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch10/">Chapter 10. Kernel Synchronization Methods</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch11/">Chapter 11. Timers and Time Management</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch12/">Chapter 12. Memory Management</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch13/">Chapter 13. The Virtual Filesystem</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch14/">Chapter 14. The Block I/O Layer</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch15/">Chapter 15. The Process Address Space</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../lkd/ch16/">Chapter 16. The Page Cache and Page Writeback</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">UNP <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../unp/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch2/">Chapter 2. The Transport Layer: TCP, UDP, and SCTP</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch3/">Chapter 3. Sockets Introduction</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch4/">Chapter 4. Elementary TCP Sockets</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch5/">Chapter 5. TCP Client/Server Example</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch6/">Chapter 6. I/O Multiplexing: The select and poll Functions</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../unp/ch7/">Chapter 7. Socket Options</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">TCPv1 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../tcpv1/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch2/">Chapter 2. The Internet Address Architecture</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch3/">Chapter 3. Link Layer</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch4/">Chapter 4. ARP: Address Resolution Protocol</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch5/">Chapter 5. The Internet Protocol (IP)</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch6/">Chapter 6. System Configuration: DHCP and Autoconfiguration</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch7/">Chapter 7. Firewalls and Network Address Translation (NAT)</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch8/">Chapter 8. ICMPv4 and ICMPv6: Internet Control Message Protocol</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch9/">Chapter 9. Broadcasting and Local Multicasting (IGMP and MLD)</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch10/">Chapter 10. User Datagram Protocol (UDP) and IP Fragmentation</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch11/">Chapter 11. Name Resolution and the Domain Name System (DNS)</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch12/">Chapter 12. TCP: The Transmission Control Protocol (Preliminaries)</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch13/">Chapter 13. TCP Connection Management</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch14/">Chapter 14. TCP Timeout and Retransmission</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch15/">Chapter 15. TCP Data Flow and Window Management</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch16/">Chapter 16. TCP Congestion Control</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch17/">Chapter 17. TCP Keepalive</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/ch18/">Chapter 18. Security: EAP, IPsec, TLS, DNSSEC, and DKIM</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../tcpv1/headers/">Headers</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
            
            
            
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">GOPL <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../gopl/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch1/">Chapter 1. Tutorial</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch2/">Chapter 2. Program Structure</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch3/">Chapter 3. Basic Data Types</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch4/">Chapter 4. Composite Types</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch5/">Chapter 5. Functions</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch6/">Chapter 6. Methods</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../gopl/ch7/">Chapter 7. Interfaces</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">PER <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../per/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../per/ch1/">Chapter 1. A Tutorial Introduction</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../per/ch6/">Chapter 6. Functions and Functional Programming</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">TWGR <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../twgr/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../twgr/ch1/">Chapter 1. Bootstrapping your Ruby literacy</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../twgr/ch2/">Chapter 2. Objects, methods, and local variables</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
            
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">SPEC <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../spec/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../spec/ch1/">Chapter 1. Introduction</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../spec/ch2/">Chapter 2. Methodology</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../spec/ch3/">Chapter 3. Operating Systems</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">BD <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                      
                        <li >
                            <a href="../../bd/">Contents</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../bd/ch1/">Chapter 1. A new paradigm for Big Data</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../bd/ch2/">Chapter 2. Data model for Big Data</a>
                        </li>
                      
                    
                      
                        <li >
                            <a href="../../bd/ch3/">Chapter 3. Data model for Big Data: Illustration</a>
                        </li>
                      
                    
                    </ul>
                </li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            </ul>
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    
                        <a href="https://github.com/shichao-an/notes/blob/master/docs/csn/part1.md">
                    
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#part-1-language">Part 1: Language</a></li>
        
    
        <li class="main "><a href="#data-types">Data Types</a></li>
        
            <li><a href="#integers">Integers</a></li>
        
            <li><a href="#floating-point-numbers">Floating-Point Numbers</a></li>
        
            <li><a href="#enumerations">Enumerations</a></li>
        
    
        <li class="main "><a href="#literals">Literals</a></li>
        
            <li><a href="#integer-constants">Integer Constants</a></li>
        
            <li><a href="#floating-constants">Floating Constants</a></li>
        
            <li><a href="#character-constants_1">Character Constants</a></li>
        
            <li><a href="#string-literals">String Literals</a></li>
        
    
        <li class="main "><a href="#type-conversions">Type Conversions</a></li>
        
            <li><a href="#arithmetic-conversions">Arithmetic conversions</a></li>
        
            <li><a href="#non-arithmetic-conversions">Non-arithmetic conversions</a></li>
        
    
        <li class="main "><a href="#references">References</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">
              

<h3 id="part-1-language"><strong>Part 1: Language</strong></h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/C99">C99</a> is discussed.</li>
<li>The examples are based on 32-bit GCC.</li>
</ul>
<h3 id="data-types">Data Types</h3>
<h4 id="integers">Integers</h4>
<p>The following are basic integer keywords:</p>
<ul>
<li><code>char</code>: signed 8-bit integer.</li>
<li><code>short</code>: signed 16-bit integer.</li>
<li><code>int</code>: signed 32-bit integer.</li>
<li><code>long</code>: 32-bit integer on the 32-bit system (<code>long int</code>), and 64-bit integer on the 64-bit system.</li>
<li><code>long long</code>: signed 64-bit intger (<code>long long int</code>).</li>
<li><code>bool</code>: <code>_Bool</code> type, 8-bit integer. The macros <code>bool</code>, <code>true</code> and <code>false</code> are defined in <code>stdbool.h</code>.</li>
</ul>
<p>Since on different systems <code>char</code> may represent a signed or unsigned 8-bit integer, it's recommended to use <code>unsigned char</code> or <code>signed char</code> to represent an exact type.</p>
<p>In <code>stdint.h</code>, more specific integer types are defined:</p>
<p><small><a href="https://github.com/shichao-an/glibc-2.21/blob/master/sysdeps/generic/stdint.h">stdint.h</a></small></p>
<div class="codehilite"><pre><span class="k">typedef</span> <span class="kt">signed</span> <span class="kt">char</span>                <span class="kt">int8_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">short</span> <span class="kt">int</span>                  <span class="kt">int16_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">int</span>                        <span class="kt">int32_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span>              <span class="kt">uint8_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span>         <span class="kt">uint16_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">int</span>               <span class="kt">uint32_t</span><span class="p">;</span>

<span class="cp">#if __WORDSIZE == 64</span>
    <span class="k">typedef</span> <span class="kt">long</span> <span class="kt">int</span>               <span class="kt">int64_t</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">int</span>      <span class="kt">uint64_t</span><span class="p">;</span>
<span class="cp">#else</span>
    <span class="n">__extension__</span>
    <span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="kt">int</span>          <span class="kt">int64_t</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="kt">int</span> <span class="kt">uint64_t</span><span class="p">;</span>
<span class="cp">#endif</span>
</pre></div>


<p>There are also size limits of these integer types:</p>
<div class="codehilite"><pre><span class="cp"># define INT8_MIN (-128)</span>
<span class="cp"># define INT16_MIN (-32767-1)</span>
<span class="cp"># define INT32_MIN (-2147483647-1)</span>
<span class="cp"># define INT64_MIN (-__INT64_C(9223372036854775807)-1)</span>

<span class="cp"># define INT8_MAX (127)</span>
<span class="cp"># define INT16_MAX (32767)</span>
<span class="cp"># define INT32_MAX (2147483647)</span>
<span class="cp"># define INT64_MAX (__INT64_C(9223372036854775807))</span>

<span class="cp"># define UINT8_MAX (255)</span>
<span class="cp"># define UINT16_MAX (65535)</span>
<span class="cp"># define UINT32_MAX (4294967295U)</span>
<span class="cp"># define UINT64_MAX (__UINT64_C(18446744073709551615))</span>
</pre></div>


<h5 id="character-constants"><strong>Character Constants</strong> *</h5>
<p>A <a href="http://en.cppreference.com/w/c/language/character_constant">character constant</a> by default is an integer of type <code>int</code>. However, the compiler determines whether to interpret it into <code>char</code> or <code>int</code>.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c, size(char)=%d, size(&#39;a&#39;)=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="k">sizeof</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">));</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>a, size(char)=1, size(&#39;a&#39;)=4;
</pre></div>


<h5 id="the-type-of-a-pointer"><strong>The Type of a Pointer</strong> *</h5>
<p>A pointer is a special-purpose integer, whose type is also defined in <code>stdint.h</code>.</p>
<div class="codehilite"><pre><span class="cm">/* Types for `void *&#39; pointers. */</span>
<span class="cp">#if __WORDSIZE == 64</span>
    <span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">int</span> <span class="kt">uintptr_t</span><span class="p">;</span>
<span class="cp">#else</span>
    <span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="kt">uintptr_t</span><span class="p">;</span>
<span class="cp">#endif</span>
</pre></div>


<p>But in the code we usually use the expression <code>sizeof(char*)</code> to save the trouble of differentiating 32-bit and 64-bit.</p>
<h5 id="representing-integer-constants"><strong>Representing Integer Constants</strong> *</h5>
<p>We can use different suffixes to represent <a href="http://en.cppreference.com/w/c/language/integer_constant">integer constants</a>. The following code:</p>
<div class="codehilite"><pre><span class="n">printf</span><span class="p">(</span><span class="s">&quot;int size=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;unsigned int size=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1U</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;long size=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1L</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;unsigned long size=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1UL</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;long long size=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1LL</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;unsigned long long size=%d;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mi">1ULL</span><span class="p">));</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>int size=4;
unsigned int size=4;
long size=4;
unsigned long size=4;
long long size=8;
unsigned long long size=8;
</pre></div>


<h5 id="helper-macros-__int64_c-and-__uint64_c"><strong>Helper Macros: <code>__INT64_C</code> and <code>__UINT64_C</code></strong> *</h5>
<p>Some helper macros are defined in <code>stdint.h</code>.</p>
<div class="codehilite"><pre><span class="cp"># if __WORDSIZE == 64</span>
<span class="cp"># define __INT64_C(c) c ## L</span>
<span class="cp"># define __UINT64_C(c) c ## UL</span>
<span class="cp"># else</span>
<span class="cp"># define __INT64_C(c) c ## LL</span>
<span class="cp"># define __UINT64_C(c) c ## ULL</span>
<span class="cp"># endif</span>
</pre></div>


<p>Note that the <code>##</code> operator in the macro means combining the left and right operands together as a symbol.</p>
<h4 id="floating-point-numbers">Floating-Point Numbers</h4>
<h5 id="real-floating-types"><strong>Real floating types</strong> *</h5>
<p>C has three types of different precisions for representing <a href="http://en.cppreference.com/w/c/language/arithmetic_types#Real_floating_types">real floating-point</a> values:</p>
<ul>
<li><code>float</code>: 32-bit, 4-byte floating-point number, which has a precision (number of significant decimal digits) of 6 (<code>FLT_DIG</code>, defined in <code>&lt;float.h&gt;</code>).</li>
<li><code>double</code>: 64-bit, 8-byte floating-point number, which has a precision of 15 (<code>DBL_DIG</code>).</li>
<li><code>long double</code>: 80-bit, 10-byte floating-point number, which has a precision of 19 (<code>LDBL_DIG</code>).</li>
</ul>
<p>The default floating type is <code>double</code>. Suffix <code>F</code> represents <code>float</code> and <code>L</code> represents <code>long double</code>.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="n">printf</span><span class="p">(</span><span class="s">&quot;float %f size=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mf">1.F</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mf">1.F</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;double %f size=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mf">.123</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mf">.123</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;long double %Lf size=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mf">1.234</span><span class="n">L</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mf">1.234</span><span class="n">L</span><span class="p">));</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>float 1.000000 size=4
double 0.123000 size=8
long double 1.234000 size=12
</pre></div>


<h5 id="complex-floating-types"><strong>Complex floating types</strong> *</h5>
<p>C99 supports complex numbers, by using two same-type floating-point number to represent real and imaginary number of the complex number.</p>
<p>To represent complex types, simply append <code>_Complex</code> to <code>float</code>, <code>double</code> and <code>long double</code>:</p>
<ul>
<li><code>float _Complex</code></li>
<li><code>double _Complex</code></li>
<li><code>long double _Complex</code></li>
</ul>
<p>If <code>&lt;complex.h&gt;</code> is included, they are also available as:</p>
<ul>
<li><code>float complex</code></li>
<li><code>double complex</code></li>
<li><code>long double complex</code></li>
</ul>
<p>The following code:</p>
<div class="codehilite"><pre><span class="cp">#include &lt;complex.h&gt;</span>

<span class="n">printf</span><span class="p">(</span><span class="s">&quot;float complex size=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">((</span><span class="kt">float</span> <span class="n">complex</span><span class="p">)</span><span class="mf">1.0</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;double complex size=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">((</span><span class="kt">double</span> <span class="n">complex</span><span class="p">)</span><span class="mf">1.0</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;long double complex size=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">((</span><span class="kt">long</span> <span class="kt">double</span> <span class="n">complex</span><span class="p">)</span><span class="mf">1.0</span><span class="p">));</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>float complex size=8
double complex size=16
long double complex size=24
</pre></div>


<h4 id="enumerations">Enumerations</h4>
<p>An <a href="http://en.cppreference.com/w/c/language/enum">enumerated type</a> (<code>enum</code>) is a distinct type whose value is restricted to one of several enumeration constants. It is declared with the following syntax:</p>
<div class="codehilite"><pre><span class="k">enum</span> <span class="n">identifier</span> <span class="p">{</span> <span class="n">enumerator</span><span class="o">-</span><span class="n">list</span> <span class="p">}</span>
</pre></div>


<ul>
<li>Each enumerator in the body of an enumeration specifier becomes an integer constant with type <code>int</code> and can be used whenever integer constants are required.</li>
<li>If enumerator is followed by <code>= constant-expression</code>, its value is the value of that constant expression.</li>
<li>If enumerator is not followed by<code>= constant-expression</code>, its value is the value one greater than the value of the previous enumerator in the same enumeration.</li>
<li>The value of the first enumerator (if it does not use <code>= constant-expression</code>) is zero.</li>
</ul>
<p>The following code:</p>
<div class="codehilite"><pre><span class="k">enum</span> <span class="n">color</span> <span class="p">{</span> <span class="n">black</span><span class="p">,</span> <span class="n">red</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">yellow</span> <span class="p">};</span>

<span class="k">enum</span> <span class="n">color</span> <span class="n">b</span> <span class="o">=</span> <span class="n">black</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;black = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">color</span> <span class="n">r</span> <span class="o">=</span> <span class="n">red</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;red = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">color</span> <span class="n">g</span> <span class="o">=</span> <span class="n">green</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;green = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">g</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">color</span> <span class="n">y</span> <span class="o">=</span> <span class="n">yellow</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;yellow = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>black = 0
red = 5
green = 6
yellow = 7
</pre></div>


<p>The values of enumerators can be the same:</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="k">enum</span> <span class="n">color</span> <span class="p">{</span> <span class="n">black</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">yellow</span> <span class="p">};</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>black = 1
red = 2
green = 1
yellow = 2
</pre></div>


<p>Usually, the identifier can be omitted, so that enumerators can be used to avoid defining constants macros.</p>
<div class="codehilite"><pre><span class="k">enum</span> <span class="p">{</span> <span class="n">BLACK</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">RED</span><span class="p">,</span> <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">YELLOW</span> <span class="p">};</span>

<span class="n">printf</span><span class="p">(</span><span class="s">&quot;black = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">BLACK</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;red = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">RED</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;green = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">GREEN</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;yellow = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">YELLOW</span><span class="p">);</span>
</pre></div>


<h3 id="literals">Literals</h3>
<p>A <a href="http://en.cppreference.com/w/c/language/expressions#Constants_and_literals">literal</a> in the source code is a token to represent a specific value, which can be an integer, a floating-point number, a character, or a string.</p>
<h4 id="integer-constants">Integer Constants</h4>
<p>Besides the common decimal expression, octal (beginning with <code>0</code>) and hexadecimal (beginning with <code>0x</code> or <code>0X</code>) expressions can be used.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mo">010</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mh">0x0A</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;x = %d, y = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>x = 8, y = 10
</pre></div>


<p>Constant types is important. They can be differentiated using suffixes.</p>
<div class="codehilite"><pre>0x200    -&gt; int
200U     -&gt; unsigned int
0L       -&gt; long
0xf0f0UL -&gt; unsigned long
0777LL   -&gt; long long
0xFFULL  -&gt; unsigned long long
</pre></div>


<h4 id="floating-constants">Floating Constants</h4>
<p>A <a href="http://en.cppreference.com/w/c/language/floating_constant">floating constant</a> can be represented using decimal and hexadecimal expressions.</p>
<p>The default type of floating constants is <code>double</code>. The <code>F</code> suffix represents <code>float</code>, and the <code>L</code> suffix represents <code>long double</code>.</p>
<h4 id="character-constants_1">Character Constants</h4>
<p>The default type for character constants is <code>int</code>, unless <code>L</code> is preposed to represent wide character constant of <code>wchar_t</code> type.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="mh">0x61</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">c2</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">c3</span> <span class="o">=</span> <span class="sc">&#39;\x61&#39;</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c, %c, %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">);</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>a, a, a
</pre></div>


<p>In Linux, the default <a href="https://en.wikipedia.org/wiki/Character_encoding">character encoding</a> is <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>. Conversion can be done using the <a href="http://en.cppreference.com/w/c/string/multibyte/wctomb"><code>wctomb</code></a> functions and the like.</p>
<p><code>wchar_t</code> is 4 bytes in size by default, so it can hold any UCS-4 Unicode character.</p>
<div class="codehilite"><pre><span class="n">setlocale</span><span class="p">(</span><span class="n">LC_CTYPE</span><span class="p">,</span> <span class="s">&quot;en_US.UTF-8&quot;</span><span class="p">);</span>

<span class="kt">wchar_t</span> <span class="n">wc</span> <span class="o">=</span> <span class="sc">L&#39;中&#39;</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>

<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">wctomb</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">wc</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;0x%02X &quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span><span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>3
0xE4 0xB8 0xAD
</pre></div>


<h4 id="string-literals">String Literals</h4>
<p>In C, a string is a <code>char</code> array ending with <code>NULL</code> (<code>\0</code>).</p>
<p>An empty string takes up 1 byte in the memory, which includes a <code>NULL</code> character. This means, a string that has a length of 1 requires at least 2 bytes (what <a href="http://en.cppreference.com/w/c/string/byte/strlen"><code>strlen</code></a> and <a href="http://en.cppreference.com/w/c/language/sizeof"><code>sizeof</code></a> means are different).</p>
<div class="codehilite"><pre><span class="kt">char</span> <span class="n">s</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;Hello, World!&quot;</span><span class="p">;</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">&quot;Hello, C!&quot;</span><span class="p">;</span>
</pre></div>


<p>As with character contants, the prefixing <code>L</code> declares a wide string literal.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="n">setlocale</span><span class="p">(</span><span class="n">LC_CTYPE</span><span class="p">,</span> <span class="s">&quot;en_US.UTF-8&quot;</span><span class="p">);</span>

<span class="kt">wchar_t</span><span class="o">*</span> <span class="n">ws</span> <span class="o">=</span> <span class="s">L&quot;中国⼈&quot;</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%ls</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ws</span><span class="p">);</span>

<span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">255</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kt">size_t</span> <span class="n">len</span> <span class="o">=</span> <span class="n">wcstombs</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">ws</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;0x%02X &quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span><span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>中国⼈
0xE4 0xB8 0xAD 0xE5 0x9B 0xBD 0xE4 0xBA&quot;;
</pre></div>


<p>Similar to a <code>char</code> string, a <code>wchar_t</code> string ends with a 4-byte <code>NULL</code>.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="kt">wchar_t</span> <span class="n">ws</span><span class="p">[]</span> <span class="o">=</span> <span class="s">L&quot;中国⼈&quot;</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;len %d, size %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">wcslen</span><span class="p">(</span><span class="n">ws</span><span class="p">),</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ws</span><span class="p">));</span>

<span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span> <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">ws</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ws</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
 <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%02X &quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>len 3, size 16
2D 4E 00 00 FD 56 00 00 BA 4E 00 00 00 00 00 00
</pre></div>


<p>The compiler will automatically concatenate adjacent strings. This is helpful for better dealing with strings in the macros or the code.</p>
<div class="codehilite"><pre><span class="cp">#define WORLD &quot;world!&quot;</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span> <span class="s">&quot; &quot;</span> <span class="n">WORLD</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>


<p>For very long strings in the source code, other than concatenating them, <code>\</code> in the end of a line can be used.</p>
<div class="codehilite"><pre><span class="kt">char</span><span class="o">*</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span>
 <span class="s">&quot; World!&quot;</span><span class="p">;</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">&quot;Hello \</span>
<span class="s">World!&quot;</span><span class="p">;</span>
</pre></div>


<p>Note that the spaces to the right of <code>\</code> will treated as part of the string.</p>
<h3 id="type-conversions">Type Conversions</h3>
<p>When the operands for an operator has different types, conversion is required. Usually, the compiler performs <a href="http://en.cppreference.com/w/c/language/conversion">implict conversions</a>, on the premise that information is not lost, to convert the "narrow" bit-width operand into the "wide" one.</p>
<h4 id="arithmetic-conversions">Arithmetic conversions</h4>
<p>The compiler's default implicit conversion ranks:</p>
<div class="codehilite"><pre>long double &gt; doulbe &gt; float &gt; long long &gt; long &gt; int &gt; char &gt; _Bool
</pre></div>


<p>The conversion rank of floating-point types is greater than that of any integers. Signed integers have the same conversion rank as their unsigned equivalence.</p>
<p>In expressions, <code>char</code> and <code>short</code> may be by default converted to <code>int</code> (<code>unsigned int</code>) operands, but <code>float</code> will not be converted to <code>double</code> by default.</p>
<p>The following code:</p>
<div class="codehilite"><pre><span class="kt">char</span> <span class="n">a</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;c&#39;</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">c</span> <span class="o">-</span> <span class="n">a</span><span class="p">));</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="mf">1.5F</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>4
4
</pre></div>


<p><u>When dealing with unsigned operands, beware of checking whether the promoted type is able to hold all values of the unsigned type.</u></p>
<div class="codehilite"><pre><span class="kt">long</span> <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1L</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="nl">a</span> <span class="p">:</span> <span class="n">b</span><span class="p">);</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>-1
</pre></div>


<p>This output is incomprehensible. Even if <code>long</code> has a greater rank than <code>unsigned int</code>, they are both 32-bit integers in 32-bit systems, and <code>long</code> is unable to hold all values of <code>unsigned int</code>. Therefore, the compilter will convert both operands to <code>unsigned long</code>, which is the unsigned greater rank. For this reason the result of <code>(unsigned long)a</code> turns into a very big integer.</p>
<blockquote>
<p>If the signedness is different and the signed operand's rank is greater than unsigned operand's rank. In this case, if the signed type can represent all values of the unsigned type, then the operand with the unsigned type is implicitly converted to the type of the signed operand. Otherwise, both operands undergo implicit conversion to the unsigned type counterpart of the signed operand's type.
<small><a href="http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions">Usual arithmetic conversions: 4)</a></small></p>
</blockquote>
<p>The following code:</p>
<div class="codehilite"><pre><span class="kt">long</span> <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1L</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="n">a</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="nl">a</span> <span class="p">:</span> <span class="n">b</span><span class="p">);</span>
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>4294967295
-1
</pre></div>


<p>Other implict conversions are:</p>
<ul>
<li>In assignment and initialization, the type of the right operator is always converted to that of the left one.</li>
<li>In a function call, the type of the actual parameter is always converted to that of the formal parameter.</li>
<li>The type of the <code>return</code> expression result is converted to that of the function's return type.</li>
<li>0 value of any type and the <code>NULL</code> pointer is deemed <code>_Bool false</code>; otherwise, it is <code>true</code>.</li>
</ul>
<p>When converting a "wide" type to a "narrow" type, the compiler will try to discard significant bits, to use rounding, or other techniques to return a approximate value.</p>
<h4 id="non-arithmetic-conversions">Non-arithmetic conversions</h4>
<ol>
<li>The name or expression of an array is usually referred to as a pointer to its first element, unless:<ul>
<li>It is used as the operand of <code>sizeof</code>.</li>
<li>The <code>&amp;</code> operator is used on it to return a "array pointer".</li>
<li>It is a <a href="#string-literals">string constant</a> are used to initialize a <code>char</code> or <code>wchar_t</code> array.</li>
</ul>
</li>
<li>
<p>A pointer can be explicitly converted to a pointer of any other types.</p>
<div class="codehilite"><pre>int x = 123, *p = &amp;x;
char* c = (char*)x;
</pre></div>


</li>
<li>
<p>Any pointer can be implictly converted to a <code>void</code> pointer and vice versa.</p>
</li>
<li>
<p>Any pointer can be implictly converted to a pointer of a more specific type (including qualifiers such as <code>const</code>, <code>volatile</code> and <code>restrict</code>).</p>
<div class="codehilite"><pre>int x = 123, *p = &amp;x;
const int* p2 = p;
</pre></div>


</li>
<li>
<p><code>NULL</code> can be converted to a pointer of any type.</p>
</li>
<li>
<p>A pointer can be explicitly converted to an integer and vice versa.</p>
<p>The following code:</p>
<div class="codehilite"><pre>int x = 123, *p = &amp;x;
int px = (int)p;

printf(&quot;%p, %x, %d\n&quot;, p, px, *(int*)px);
</pre></div>


<p>will output:</p>
<div class="codehilite"><pre>0xbfc1389c, bfc1389c, 123
</pre></div>


</li>
</ol>
<hr />
<h3 id="references">References</h3>
<ul>
<li><a href="http://en.cppreference.com/w/c">C reference - cppreference.com</a></li>
<li>[CPP] <em>C Primer Plus</em> (6th Edition)</li>
</ul>
            </div>
        </div>

        <footer class="col-md-12">
            
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../custom.js"></script>
    </body>
</html>